var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{a as defineComponent,I as useI18n,r as ref,b$ as ProgressStatus,o as onMounted,f as openBlock,g as createElementBlock,A as createBaseVNode,ay as createTextVNode,a8 as toDisplayString,z as unref,i as createCommentVNode,h as createVNode,D as script,c0 as BaseTerminal,R as pushScopeId,U as popScopeId,c1 as electronAPI,_ as _export_sfc}from"./index-_5-xtSVQ.js";const _hoisted_1={class:"font-sans flex flex-col justify-center items-center h-screen m-0 text-neutral-300 bg-neutral-900 dark-theme pointer-events-auto"},_hoisted_2={class:"text-2xl font-bold"},_hoisted_3={key:0},_hoisted_4={key:0,class:"flex items-center my-4 gap-2"},_sfc_main=defineComponent({__name:"ServerStartView",setup(__props){const electron=electronAPI(),{t}=useI18n(),status=ref(ProgressStatus.INITIAL_STATE),electronVersion=ref("");let xterm;const updateProgress=__name(({status:newStatus})=>{status.value=newStatus,newStatus!==ProgressStatus.ERROR&&xterm?.clear()},"updateProgress"),terminalCreated=__name(({terminal,useAutoSize},root)=>{xterm=terminal,useAutoSize(root,!0,!0),electron.onLogMessage(message=>{terminal.write(message)}),terminal.options.cursorBlink=!1,terminal.options.disableStdin=!0,terminal.options.cursorInactiveStyle="block"},"terminalCreated"),reinstall=__name(()=>electron.reinstall(),"reinstall"),reportIssue=__name(()=>{window.open("https://forum.comfy.org/c/v1-feedback/","_blank")},"reportIssue"),openLogs=__name(()=>electron.openLogsFolder(),"openLogs");return onMounted(async()=>{electron.sendReady(),electron.onProgressUpdate(updateProgress),electronVersion.value=await electron.getElectronVersion()}),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("h2",_hoisted_2,[createTextVNode(toDisplayString(unref(t)(`serverStart.process.${status.value}`))+" ",1),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("span",_hoisted_3," v"+toDisplayString(electronVersion.value),1)):createCommentVNode("",!0)]),status.value===unref(ProgressStatus).ERROR?(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(unref(script),{icon:"pi pi-flag",severity:"secondary",label:unref(t)("serverStart.reportIssue"),onClick:reportIssue},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-file",severity:"secondary",label:unref(t)("serverStart.openLogs"),onClick:openLogs},null,8,["label"]),createVNode(unref(script),{icon:"pi pi-refresh",label:unref(t)("serverStart.reinstall"),onClick:reinstall},null,8,["label"])])):createCommentVNode("",!0),createVNode(BaseTerminal,{onCreated:terminalCreated})]))}}),ServerStartView=_export_sfc(_sfc_main,[["__scopeId","data-v-95e9eb99"]]);export{ServerStartView as default};
//# sourceMappingURL=ServerStartView-Bp_w8hJH.js.map
