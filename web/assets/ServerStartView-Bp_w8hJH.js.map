{"version":3,"file":"ServerStartView-Bp_w8hJH.js","sources":["../../src/views/ServerStartView.vue"],"sourcesContent":["<template>\n  <div\n    class=\"font-sans flex flex-col justify-center items-center h-screen m-0 text-neutral-300 bg-neutral-900 dark-theme pointer-events-auto\"\n  >\n    <h2 class=\"text-2xl font-bold\">\n      {{ t(`serverStart.process.${status}`) }}\n      <span v-if=\"status === ProgressStatus.ERROR\">\n        v{{ electronVersion }}\n      </span>\n    </h2>\n    <div\n      v-if=\"status === ProgressStatus.ERROR\"\n      class=\"flex items-center my-4 gap-2\"\n    >\n      <Button\n        icon=\"pi pi-flag\"\n        severity=\"secondary\"\n        :label=\"t('serverStart.reportIssue')\"\n        @click=\"reportIssue\"\n      />\n      <Button\n        icon=\"pi pi-file\"\n        severity=\"secondary\"\n        :label=\"t('serverStart.openLogs')\"\n        @click=\"openLogs\"\n      />\n      <Button\n        icon=\"pi pi-refresh\"\n        :label=\"t('serverStart.reinstall')\"\n        @click=\"reinstall\"\n      />\n    </div>\n    <BaseTerminal @created=\"terminalCreated\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { ref, onMounted, Ref } from 'vue'\nimport BaseTerminal from '@/components/bottomPanel/tabs/terminal/BaseTerminal.vue'\nimport { ProgressStatus } from '@comfyorg/comfyui-electron-types'\nimport { electronAPI } from '@/utils/envUtil'\nimport type { useTerminal } from '@/hooks/bottomPanelTabs/useTerminal'\nimport { Terminal } from '@xterm/xterm'\nimport { useI18n } from 'vue-i18n'\n\nconst electron = electronAPI()\nconst { t } = useI18n()\n\nconst status = ref<ProgressStatus>(ProgressStatus.INITIAL_STATE)\nconst electronVersion = ref<string>('')\nlet xterm: Terminal | undefined\n\nconst updateProgress = ({ status: newStatus }: { status: ProgressStatus }) => {\n  status.value = newStatus\n  if (newStatus !== ProgressStatus.ERROR) xterm?.clear()\n}\n\nconst terminalCreated = (\n  { terminal, useAutoSize }: ReturnType<typeof useTerminal>,\n  root: Ref<HTMLElement>\n) => {\n  xterm = terminal\n\n  useAutoSize(root, true, true)\n  electron.onLogMessage((message: string) => {\n    terminal.write(message)\n  })\n\n  terminal.options.cursorBlink = false\n  terminal.options.disableStdin = true\n  terminal.options.cursorInactiveStyle = 'block'\n}\n\nconst reinstall = () => electron.reinstall()\nconst reportIssue = () => {\n  window.open('https://forum.comfy.org/c/v1-feedback/', '_blank')\n}\nconst openLogs = () => electron.openLogsFolder()\n\nonMounted(async () => {\n  electron.sendReady()\n  electron.onProgressUpdate(updateProgress)\n  electronVersion.value = await electron.getElectronVersion()\n})\n</script>\n\n<style scoped>\n:deep(.xterm-helper-textarea) {\n  /* Hide this as it moves all over when uv is running */\n  display: none;\n}\n</style>\n"],"names":[],"mappings":"gzBA8CA,MAAM,SAAW,cACX,CAAE,GAAM,UAER,OAAS,IAAoB,eAAe,aAAa,EACzD,gBAAkB,IAAY,EAAE,EAClC,IAAA,MAEJ,MAAM,eAAiB,QAAC,CAAE,OAAQ,aAA4C,CAC5E,OAAO,MAAQ,UACX,YAAc,eAAe,OAAO,OAAO,MAAM,CAAA,EAFhC,kBAKjB,gBAAkB,QACtB,CAAE,SAAU,WAAA,EACZ,OACG,CACK,MAAA,SAEI,YAAA,KAAM,GAAM,EAAI,EACnB,SAAA,aAAc,SAAoB,CACzC,SAAS,MAAM,OAAO,CAAA,CACvB,EAED,SAAS,QAAQ,YAAc,GAC/B,SAAS,QAAQ,aAAe,GAChC,SAAS,QAAQ,oBAAsB,OAAA,EAbjB,mBAgBlB,UAAY,WAAM,SAAS,YAAf,aACZ,YAAc,WAAM,CACjB,OAAA,KAAK,yCAA0C,QAAQ,CAAA,EAD5C,eAGd,SAAW,WAAM,SAAS,iBAAf,YAEjB,iBAAU,SAAY,CACpB,SAAS,UAAU,EACnB,SAAS,iBAAiB,cAAc,EACxB,gBAAA,MAAQ,MAAM,SAAS,mBAAmB,CAAA,CAC3D"}